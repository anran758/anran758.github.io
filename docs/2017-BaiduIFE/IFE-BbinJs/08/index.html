<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dom Trees</title>
  <style type="text/css">
    div {
      display: inline-block;
      border: 2px solid rgb(0, 204, 255);
      border-radius: 10px;
      margin: 30px;
      background: #fff;
    }
    button {
      width: 80px;
      height: 30px;
      border-radius: 4px;
      border: 1px solid rgb(0, 204, 255);
      margin-right: 15px;
      color: #111;
    }
    .main {
      display: flex;
      justify-content: center;
    }
    .container {
      width: 100%;
      height: 300px;
      display: flex;
      flex-flow: row wrap;
      justify-content: space-around;
    }
    .contai-fa {
      display: flex;
      flex: 1;
    }
    .contai-child {
      display: flex;
      flex: 1;
    }
    .contai-child div {
      flex: 1;
    }
    .control {
      display: block;
      width: 100%;
      margin-top: 20px;
      text-align: center;
    }
    .normal {
      background-color: #fff;
    }
    .animate {
      background-color: rgb(0, 204, 255);
      transition: all ease 1s;
    }
  </style>
</head>
<body>
  <section class="main">
    <div id="root" class="container">
      <div class="contai-fa">
        <div class="contai-child">
          <div></div>
          <div></div>
        </div>
        <div class="contai-child">
          <div></div>
          <div></div>
        </div>
      </div>
      <div class="contai-fa">
        <div class="contai-child">
          <div></div>
          <div></div>
        </div>
        <div class="contai-child">
          <div></div>
          <div></div>
        </div>
      </div>
    </div>
  </section>
  <section class="control" id="btns">
    <button id="btnDlr">前序遍历</button>
    <button id="btnLdr">中序遍历</button>
    <button id="btnLrd">后序遍历</button>
  </section>
  <script>
    var $ = function(id) {
      return document.getElementById(id);
    };

    var treeList = [];
    var root = $('root');
    var btns = $('btns');
    var timer = null;

    // 鼠标点击事件
    btns.addEventListener('click', function(event) {
      var traget = event.target;
      // 每次点击前重置一下
      reset();

      switch (traget.id) {
        case "btnDlr":
          perOrder(root);
          break;
        case "btnLdr":
          inOrder(root);
          break;
        case "btnLrd":
          postOrder(root);
          break;
        default:
          break;
      }
      console.log(treeList);
      if (treeList.length > 0) {
        addStyle();
      }
    });

      // 重置,清除定时器和添加的类名
      function reset() {
        clearInterval(timer);
        treeList.forEach(function (e) {
          e.className = e.className.replace(/normal|animate/, "");
        });
        treeList = [];
      }

      // 添加动画
      function addStyle() {
        var i =0;
        treeList[i].classList.add('animate');
        timer = setInterval(function() {
          i++;
          // 每次i++,判断又没有超过上限,没超过就把上一个的"animate"替换为"normal",下一个替换为"animate";

          if (i < treeList.length) {
            treeList[i -1].className = treeList[i - 1].className.replace(/animate/, "normal");
            treeList[i].classList.add("animate");
          } else {
            // 遍历完后清除定时器,并把上一个颜色调回"normal";
            clearInterval(timer);
            treeList[i - 1].className = treeList[i - 1].className.replace(/animate/, "normal");
          }
        }, 1000);
      }

      // 前序遍历 DlR
      function perOrder(node) {
        if (node != null) {
          treeList.push(node);          // 根节点
          // 相当于调用perOrder这个函数本身一样,遍历"node"中所有左/右子树
          arguments.callee(node.firstElementChild);
          arguments.callee(node.lastElementChild);
        }
      }

      // 中序遍历 LDR
      function inOrder(node) {
        if (node != null) {
          arguments.callee(node.firstElementChild);
          treeList.push(node);
          arguments.callee(node.lastElementChild);
        }
      }

      // 后序遍历 LRD
      function postOrder(node) {
        if (node != null) {
          arguments.callee(node.firstElementChild);
          arguments.callee(node.lastElementChild);
          treeList.push(node);
        }
      }
  </script>
</body>
</html>